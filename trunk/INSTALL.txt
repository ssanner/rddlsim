RDDLSim -- A simulator for the relational dynamic influence diagram
           language (RDDL).

Copyright (C) 2010, Scott Sanner (ssanner@gmail.com) and
                    Sungwook Yoon (sungwook.yoon@gmail.com)


Basic RDDLSim Installation and Invocation
=========================================

rddlsim/ provides the following subdirectories:

    src   All source code (.java files)
    bin   All binaries (.class files)
    lib   All 3rd party libraries (.jar files)
    files All supplementary files (.rddl files, etc.)

Always ensure that all .jar files in lib/ are included in your
CLASSPATH for both Java compilation and at Java runtime.  We highly
recommend that you use Eclipse for Java development:

    http://www.eclipse.org/downloads/

In Eclipse the CLASSPATH libraries can be set via 

    Project -> Properties -> Java Build Path -> Libraries Tab

For running RDDLSim from a terminal, we provide two scripts

    run     For Windows/Cygwin and UNIX/Linux systems
    run.bat For the Windows CMD prompt

In both cases, run these scripts from the **rddlsim/**
directory with the class name as an argument, e.g.

    Windows/Cygwin and UNIX/Linux: ./run rddl.sim.Simulator
    Windows CMD prompt:            .\run.bat rddl.sim.Simulator

You can pass up to 10 arguments to these scripts as required.


Basic RDDLSim Usage
===================

We currently provide the following rddlsim command line utilities:

    Validating RDDL Syntax: 

        rddl.parser.parser filename
        
        (e.g., files/rddl/test/sysadmin.rddl for filename)

    Running the RDDL Simulator Standalone:

        rddl.sim.Simulator RDDL-file policy-class-name instance-name [state-viz-class-name]
        
        (n.b., rddl.viz.GenericScreenDisplay is default for state-viz-class-name)

    Visualizing the RDDL DBN:

        rddl.viz.RDDL2Graph RDDL-file instance-name
        
        (n.b., requires GraphViz, installation details at end of this file)

    Running the RDDL Server and Client: [command line parameters subject to change]
    
        rddl.competition.Server RDDL-file [port-number]
        rddl.competition.Client RDDL-file host-name client-name policy-class-name [port-number]
        
        n.b., (1) default port number is 2323
        	  (2) policy-class-name:
        	       ...examples: rddl.policy.RandomBoolPolicy or rddl.policy.RandomEnumPolicy 
        	       ...any policy which derives from rddl.Policy, including any classes *you* write
        	       ...for *your* client, you need only provide a policy derived from rddl.Policy
        
	Examples (run from rddlsim directory, ./run for UNIX/Cygwin, run.bat for Windows):
		
		./run rddl.parser.parser files/rddl/test/sysadmin.rddl 
		./run rddl.parser.parser files/rddl/test/game_of_life.rddl 
	
		./run rddl.sim.Simulator files/rddl/test/dbn_prop.rddl rddl.policy.RandomBoolPolicy inst_dbn
		./run rddl.sim.Simulator files/rddl/test/game_of_life.rddl rddl.policy.RandomBoolPolicy is1 rddl.viz.GameOfLifeScreenDisplay
		./run rddl.sim.Simulator files/rddl/test/sysadmin.rddl rddl.policy.RandomBoolPolicy is1 rddl.viz.SysAdminScreenDisplay
		./run rddl.sim.Simulator files/rddl/test/sidewalk.rddl rddl.policy.RandomEnumPolicy is2 rddl.viz.SidewalkGraphicsDisplay
		./run rddl.sim.Simulator files/rddl/test/traffic_binary_ctm.rddl rddl.policy.RandomBoolPolicy is1 rddl.viz.TrafficDisplay

		./run rddl.viz.RDDL2Graph files/rddl/test/dbn_prop.rddl inst_dbn
		./run rddl.viz.RDDL2Graph files/rddl/test/dbn_types_interm_po.rddl inst_dbn
		./run rddl.viz.RDDL2Graph files/rddl/test/game_of_life.rddl is1

		./run rddl.competition.Server files/rddl/test/game_of_life.rddl
		./run rddl.competition.Client files/rddl/test/game_of_life.rddl localhost MyClientName rddl.policy.RandomBoolPolicy


Modifying the RDDL Language
===========================

The following lexical pattern, grammar files, and Makefile are provided 
in rddlsim/src/rddl/parser/

    rddl.lex  The lexical pattern specification for use with JLex.
    rddl.cup  The parser rules specification and internal representation
              generation code for use with JavaCUP.
    Makefile  Makefile with rules for generating lexer and parser.
    
Note the versions of JLex and JavaCUP that we are using are *not* the
most recent versions available on the web and hence we have bundled
jlex.jar and java_cup.jar in the lib/ directory for use with compiling
these files and runtime execution.

If you make modifications to the language (not recommended if you are
competing in IPPC-2011) you can recompile the parser by first
uncommenting the following line in Makefile

    SEP = : 

*if* you are on a UNIX/Linux system (*otherwise* changing nothing if you
are on Windows/Cygwin) and then invoking the following commands from
the **rddlsim/src/rddl/parser/** directory:

    make lex

followed by

    make parser

You may have to change the number of expected production conflict
errors for the parser in the Makefile if your modifications are
substantial.  See the parser rule in the Makefile for this parameter.

These commands only produce the Java files in the 
rddlsim/src/rddl/parser/ directory, they must be compiled
by javac (this is usually automatic if you are using Eclipse).


GraphViz RDDL Visualization
===========================

Although not required to run the basic RDDL simulator facilities, some
additional GraphViz visualization tools are provided.  

To enable Java Graphviz visualization:

- Download and install GraphViz on your system:
 
  http://www.graphviz.org/

- Make sure "dot" and "neato" (including ".exe" if running on Windows)
  are in your PATH, i.e., you can execute them from any home directory

Run graph.Graph.main() and verify that a cleanly formatted Java window
displaying a graph appears.

Run rddl.viz.RDDL2Graph.main() to convert RDDL files to interactively
view DBNs for RDDL instances in a Java viewer and export GraphViz 
graph specifications for publication. 